$def with (form, song, infos)
<html>
    <head>
        <script type="text/javascript" src="/static/mootools-1.2-core.js"></script>
        <script type="text/javascript">
            function wget(what) {
                new Request.JSON({url:what, method: "get"}).send();
                //window.location.reload();
                return false;
            };
            function refresh_infos(infos) {
                txt = "";
                for (i in infos) {
                    txt += "<tr><td><b>"+i+":</b></td><td>"+infos[i]+"</td></tr>";
                }
                if (txt) {
                    \$('descr').innerHTML = '<table>'+txt+'</table>';
                    if (infos['song_position']) {
                        \$('progressbar').tween('width', infos['song_position']/infos['length']*100);
                    }
                } else {
                   \$('descr').innerHTML = "<h2>No song played</h2>";
                }
                tick.delay(2000);
            };
            function tick() {
                new Request.JSON({url:'infos?fmt=json', method: "get", onSuccess: refresh_infos}).send();
            };
            window.addEvent('domready', function() {
                \$('progressbar').set('tween', {'duration':2500});
                tick.delay(2000);
            });

        </script>
    </head>
    <body><img src="/static/pics/bee.png" style="margin: 0 auto auto 0; padding: 0; float: left;" />

<link rel="stylesheet" href="/static/main.css" media="screen">


<div id="decrBlock">
    <div id="descr">
    $if song:
        Song ${infos['current']} of ${infos['total']}.
        <table>
        $for k, v in song.iteritems():
            <tr><td><b>${k}:</b></td><td>$v</td></tr>
        </table>
    $else:
    <h2>No song played</h2>
    </div>
    <div id="progressbase"><div id="progressbar"></div></div>
</div>
        <div id="cmdgroup">
            <div style="bgcolor: green;" class="blockcmd">
                <a href="playlist">View playlist</a>
            </div>
            <div style="bgcolor: red;" class="blockcmd">
                <a href="#" onclick='wget("prev");'>Back!</a>
            </div>
            <div style="bgcolor: red;" class="blockcmd">
                <a href="#" onclick='wget("next");'>Zap!</a>
            </div>
            <div style="bgcolor: red;" class="blockcmd">
                <a href="#" onclick='wget("shuffle");'>Shuffle!</a>
            </div>
            <div style="bgcolor: red;" class="blockcmd">
                <a href="#" onclick='wget("pause");'>Pause!</a>
            </div>
            <!--
            <div style="bgcolor: red;" class="blockcmd">
                <a href="#" onclick='wget("seek/-10");'>&lt;&lt;&lt;</a>Seek<a href="#" onclick='wget("seek/+10");'>&gt;&gt;&gt;</a>
            </div>
            -->
        </div>
        <form action="/search?fmt=txt" class="formBlock">
            $:form.render()
            <input type="submit" value="Search" />
        </form>
    </body>
</html>
